<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="assets/images/agri logo.png">
    <title>Admin Dashboard - E-AGRI</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Dashboard Navigation -->
    <nav class="dashboard-nav">
        <div class="nav-brand">
            <i class="fas fa-seedling"></i>
            <span>E-AGRI Admin</span>
        </div>
        <div class="nav-user">
            <div class="notification-icon">
                <i class="fas fa-bell"></i>
                <span class="badge">8</span>
            </div>
            <div class="user-dropdown">
                <div class="user-info" onclick="toggleUserMenu()">
                    <img src="assets/images/default-avatar.png" alt="User" class="user-avatar">
                    <span id="userName">Admin</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="dropdown-menu" id="userMenu">
                    <a href="#" onclick="showProfile()"><i class="fas fa-user"></i> Profile</a>
                    <a href="#" onclick="showSettings()"><i class="fas fa-cog"></i> Settings</a>
                    <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Sidebar -->
    <aside class="sidebar">
        <ul class="sidebar-menu">
            <li class="menu-item active" data-section="dashboard">
                <i class="fas fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </li>
            <li class="menu-item" data-section="verify-dealers">
                <i class="fas fa-user-check"></i>
                <span>Verify Dealers</span>
                <span class="menu-badge">3</span>
            </li>
            <li class="menu-item" data-section="users">
                <i class="fas fa-users"></i>
                <span>User Management</span>
            </li>
            <li class="menu-item" data-section="weather">
                <i class="fas fa-cloud-sun"></i>
                <span>Weather Management</span>
            </li>
            <li class="menu-item" data-section="market-prices">
                <i class="fas fa-chart-line"></i>
                <span>Market Prices</span>
            </li>
            <li class="menu-item" data-section="news">
                <i class="fas fa-newspaper"></i>
                <span>Agriculture News</span>
            </li>
            <li class="menu-item" data-section="analytics">
                <i class="fas fa-chart-bar"></i>
                <span>Platform Analytics</span>
            </li>
        </ul>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Overview Section -->
        <section id="dashboard" class="content-section active">
            <div class="section-header">
                <h1>Admin Dashboard</h1>
                <p>Platform overview and statistics</p>
            </div>

            <!-- Quick Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalUsers">0</h3>
                        <p>Total Users</p>
                        <small class="trend-info">+12 this week</small>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb, #f5576c);">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalFarmers">0</h3>
                        <p>Active Farmers</p>
                        <small class="trend-info">+8 this week</small>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe, #00f2fe);">
                        <i class="fas fa-store"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalDealers">0</h3>
                        <p>Verified Dealers</p>
                        <small class="trend-info">+4 this week</small>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #fa709a, #fee140);">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="pendingDealers">0</h3>
                        <p>Pending Verifications</p>
                        <small class="trend-info">Needs attention</small>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="section-container">
                <h2>Quick Actions</h2>
                <div class="quick-actions-grid">
                    <button class="action-card" onclick="switchSection('verify-dealers')">
                        <i class="fas fa-user-check"></i>
                        <h3>Verify Dealers</h3>
                        <p>Review pending dealer applications</p>
                    </button>
                    <button class="action-card" onclick="switchSection('weather')">
                        <i class="fas fa-cloud-sun"></i>
                        <h3>Update Weather</h3>
                        <p>Post weather forecasts</p>
                    </button>
                    <button class="action-card" onclick="switchSection('market-prices')">
                        <i class="fas fa-rupee-sign"></i>
                        <h3>Update Prices</h3>
                        <p>Enter market crop prices</p>
                    </button>
                    <button class="action-card" onclick="switchSection('news')">
                        <i class="fas fa-newspaper"></i>
                        <h3>Post News</h3>
                        <p>Publish agriculture news</p>
                    </button>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="section-container">
                <div class="section-title-row">
                    <h2>Recent Activity</h2>
                    <button class="btn btn-outline btn-sm" onclick="refreshActivity()">
                        <i class="fas fa-sync"></i> Refresh
                    </button>
                </div>
                <div class="activity-feed" id="activityFeed">
                    <div class="activity-item">
                        <div class="activity-icon" style="background: #4facfe;">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <div class="activity-content">
                            <p><strong>New farmer registered:</strong> Rajesh Kumar</p>
                            <small>2 hours ago</small>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon" style="background: #f5576c;">
                            <i class="fas fa-store"></i>
                        </div>
                        <div class="activity-content">
                            <p><strong>Dealer verification pending:</strong> Agro Seeds Store</p>
                            <small>3 hours ago</small>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Verify Dealers Section -->
        <section id="verify-dealers" class="content-section">
            <div class="section-header">
                <h1>Dealer Verification</h1>
                <p>Review and approve dealer applications</p>
            </div>

            <div class="filter-bar">
                <select id="verificationFilter" onchange="filterDealers()" class="form-control">
                    <option value="pending">Pending</option>
                    <option value="verified">Verified</option>
                    <option value="rejected">Rejected</option>
                    <option value="all">All Dealers</option>
                </select>
            </div>

            <div class="dealers-grid" id="dealersGrid">
                <!-- Dealer cards will be loaded dynamically -->
            </div>
        </section>

        <!-- Users Management Section -->
        <section id="users" class="content-section">
            <div class="section-header">
                <h1>User Management</h1>
                <p>Manage platform users</p>
            </div>

            <div class="filter-bar">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="userSearch" placeholder="Search users..." onkeyup="searchUsers()">
                </div>
                <select id="roleFilter" onchange="filterUsers()" class="form-control">
                    <option value="">All Roles</option>
                    <option value="farmer">Farmers</option>
                    <option value="dealer">Dealers</option>
                    <option value="admin">Admins</option>
                </select>
                <select id="statusFilter" onchange="filterUsers()" class="form-control">
                    <option value="">All Status</option>
                    <option value="1">Active</option>
                    <option value="0">Inactive</option>
                </select>
            </div>

            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Status</th>
                            <th>Registered</th>
                            <th>Last Login</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="usersTable">
                        <tr>
                            <td colspan="8" class="text-center">Loading users...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Weather Management Section -->
        <section id="weather" class="content-section">
            <div class="section-header">
                <h1>Weather Management</h1>
                <p>Update weather forecasts for farmers</p>
            </div>

            <div class="form-container">
                <form id="weatherForm" class="weather-form">
                    <h3>Add Weather Forecast</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Location</label>
                            <input type="text" id="weatherLocation" class="form-control" placeholder="City name" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">District</label>
                            <input type="text" id="weatherDistrict" class="form-control" placeholder="District" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">State</label>
                            <select id="weatherState" class="form-control form-select" required>
                                <option value="">Select State</option>
                                <option value="Karnataka">Karnataka</option>
                                <option value="Maharashtra">Maharashtra</option>
                                <option value="Tamil Nadu">Tamil Nadu</option>
                                <option value="Andhra Pradesh">Andhra Pradesh</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Temperature (°C)</label>
                            <input type="number" id="weatherTemp" class="form-control" placeholder="28" step="0.1" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Humidity (%)</label>
                            <input type="number" id="weatherHumidity" class="form-control" placeholder="65" min="0" max="100" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Wind Speed (km/h)</label>
                            <input type="number" id="weatherWind" class="form-control" placeholder="12" step="0.1" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Condition</label>
                            <select id="weatherCondition" class="form-control form-select" required>
                                <option value="Clear">Clear</option>
                                <option value="Cloudy">Cloudy</option>
                                <option value="Rain">Rain</option>
                                <option value="Thunderstorm">Thunderstorm</option>
                                <option value="Drizzle">Drizzle</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Rainfall (mm)</label>
                            <input type="number" id="weatherRainfall" class="form-control" placeholder="0" step="0.1" value="0">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Forecast Date</label>
                            <input type="date" id="weatherDate" class="form-control" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <textarea id="weatherDescription" class="form-control" rows="2" placeholder="Additional weather details..."></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-cloud-upload-alt"></i> Add Weather Data
                    </button>
                </form>
            </div>

            <div class="section-container" style="margin-top: 2rem;">
                <h3>Recent Weather Updates</h3>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Location</th>
                                <th>Temperature</th>
                                <th>Condition</th>
                                <th>Humidity</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="weatherTable">
                            <tr>
                                <td colspan="6" class="text-center">No weather data yet</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Market Prices Section -->
        <section id="market-prices" class="content-section">
            <div class="section-header">
                <h1>Market Price Management</h1>
                <p>Update daily mandi crop prices</p>
            </div>

            <div class="form-container">
                <form id="priceForm" class="price-form">
                    <h3>Add Market Price</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Crop Name</label>
                            <input type="text" id="cropName" class="form-control" placeholder="e.g., Rice, Wheat" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Market Location</label>
                            <input type="text" id="marketLocation" class="form-control" placeholder="Market name" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">District</label>
                            <input type="text" id="priceDistrict" class="form-control" placeholder="District" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">State</label>
                            <select id="priceState" class="form-control form-select" required>
                                <option value="">Select State</option>
                                <option value="Karnataka">Karnataka</option>
                                <option value="Maharashtra">Maharashtra</option>
                                <option value="Tamil Nadu">Tamil Nadu</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Min Price (₹/Quintal)</label>
                            <input type="number" id="minPrice" class="form-control" placeholder="1500" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Max Price (₹/Quintal)</label>
                            <input type="number" id="maxPrice" class="form-control" placeholder="1800" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Modal Price (₹/Quintal)</label>
                            <input type="number" id="modalPrice" class="form-control" placeholder="1650" step="0.01" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Price Date</label>
                            <input type="date" id="priceDate" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Unit</label>
                            <select id="priceUnit" class="form-control form-select">
                                <option value="quintal">Quintal</option>
                                <option value="kg">Kilogram</option>
                                <option value="ton">Ton</option>
                            </select>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Add Market Price
                    </button>
                </form>
            </div>

            <div class="section-container" style="margin-top: 2rem;">
                <h3>Recent Price Updates</h3>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Crop</th>
                                <th>Market</th>
                                <th>Min Price</th>
                                <th>Max Price</th>
                                <th>Modal Price</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="pricesTable">
                            <tr>
                                <td colspan="7" class="text-center">No price data yet</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- News Management Section -->
        <section id="news" class="content-section">
            <div class="section-header">
                <h1>Agriculture News Management</h1>
                <p>Publish news and updates for farmers</p>
            </div>

            <div class="form-container">
                <form id="newsForm" class="news-form">
                    <h3>Publish News Article</h3>
                    
                    <div class="form-group">
                        <label class="form-label">Title</label>
                        <input type="text" id="newsTitle" class="form-control" placeholder="Enter news title" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <select id="newsCategory" class="form-control form-select" required>
                            <option value="general">General</option>
                            <option value="weather">Weather</option>
                            <option value="market">Market</option>
                            <option value="technique">Farming Technique</option>
                            <option value="government_scheme">Government Scheme</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Description (Summary)</label>
                        <textarea id="newsDescription" class="form-control" rows="3" placeholder="Brief summary..." required></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Full Content</label>
                        <textarea id="newsContent" class="form-control" rows="8" placeholder="Full article content..."></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Image URL (Optional)</label>
                            <input type="url" id="newsImage" class="form-control" placeholder="https://example.com/image.jpg">
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="newsFeatured">
                                <span>Mark as Featured</span>
                            </label>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-paper-plane"></i> Publish News
                    </button>
                </form>
            </div>
        </section>

        <!-- Analytics Section -->
        <section id="analytics" class="content-section">
            <div class="section-header">
                <h1>Platform Analytics</h1>
                <p>Monitor platform performance and usage</p>
            </div>

            <div class="analytics-dashboard">
                <div class="chart-grid">
                    <div class="chart-card">
                        <h3>User Growth</h3>
                        <canvas id="userGrowthChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>User Distribution</h3>
                        <canvas id="userDistChart"></canvas>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script src="assets/js/main.js"></script>
    <script src="assets/js/admin-dashboard.js"></script>
</body>
</html>
